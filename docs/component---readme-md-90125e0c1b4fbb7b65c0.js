(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"7OsV":function(e,t,a){"use strict";a.r(t),a.d(t,"_frontmatter",(function(){return l})),a.d(t,"default",(function(){return s}));var n=a("Fcif"),o=a("+I+c"),r=(a("mXGw"),a("/FXl")),c=a("TjRS"),l=(a("aD51"),{});void 0!==l&&l&&l===Object(l)&&Object.isExtensible(l)&&!l.hasOwnProperty("__filemeta")&&Object.defineProperty(l,"__filemeta",{configurable:!0,value:{name:"_frontmatter",filename:"README.md"}});var b={_frontmatter:l},i=c.a;function s(e){var t=e.components,a=Object(o.a)(e,["components"]);return Object(r.b)(i,Object(n.a)({},b,a,{components:t,mdxType:"MDXLayout"}),Object(r.b)("h1",{id:"mml-for-react"},"MML for React"),Object(r.b)("h2",{id:"todo"},"TODO"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"fix stream-chat-react build issues (done)"),Object(r.b)("li",{parentName:"ul"},"functional components with hooks (done)"),Object(r.b)("li",{parentName:"ul"},"use a context to share stuff to lower level components (done)"),Object(r.b)("li",{parentName:"ul"},"toReact should be defined at the tree level and allow you to overwrite the mappings (done)"),Object(r.b)("li",{parentName:"ul"},"make mml in stream chat react a singleton type of pattern (done)"),Object(r.b)("li",{parentName:"ul"},"refactor how state is handled for date picker element and number element (done)"),Object(r.b)("li",{parentName:"ul"},"move the converterConfig for react into it's own file (done)"),Object(r.b)("li",{parentName:"ul"},"prop types for all react tags (done)"),Object(r.b)("li",{parentName:"ul"},"cleanup all linting errors (done)"),Object(r.b)("li",{parentName:"ul"},"styleguidist for all react tags (done)"),Object(r.b)("li",{parentName:"ul"},"move all tags into shared files (done)"),Object(r.b)("li",{parentName:"ul"},"Document how to create a new tag (done)"),Object(r.b)("li",{parentName:"ul"},"styleguidist publish flow (done)"),Object(r.b)("li",{parentName:"ul"},"convert date string into date object for add to calendar (done)"),Object(r.b)("li",{parentName:"ul"},"Refine examples for docs and example project (done)"),Object(r.b)("li",{parentName:"ul"},"Write Docs in stream CMS (done)"),Object(r.b)("li",{parentName:"ul"},"Add alt and title support to image tags (done)"),Object(r.b)("li",{parentName:"ul"},"Review the button tag (done)"),Object(r.b)("li",{parentName:"ul"},"Fix MML & MML Container state management (done)"),Object(r.b)("li",{parentName:"ul"},"ship a 0.1 release on NPM (done)"),Object(r.b)("li",{parentName:"ul"},"ship stream-chat-react support for MML (mml2 branch, ready)"),Object(r.b)("li",{parentName:"ul"},"figure out proptype weirdness (getting some validation errors on valid input)"),Object(r.b)("li",{parentName:"ul"},"document how to overwrite 1 specific component for MML (done)"),Object(r.b)("li",{parentName:"ul"},"Button/URL verify it works (done)")),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"scheduler component"),Object(r.b)("li",{parentName:"ul"},"implement hard failure on invalid MML")),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"clean Git history"),Object(r.b)("li",{parentName:"ul"},"tests & coverage reporting"),Object(r.b)("li",{parentName:"ul"},"CSS for all components"),Object(r.b)("li",{parentName:"ul"},"consider renaming column tag, consider if we need a table tag..?")),Object(r.b)("h3",{id:"design"},"Design"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"Add to Calendar element is missing"),Object(r.b)("li",{parentName:"ul"},"Loading, Success and Error states")),Object(r.b)("h2",{id:"install"},"Install"),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-bash"}),"git clone https://github.com/GetStream/mml-react.git\ncd mml-react\nyarn; yarn start\n")),Object(r.b)("p",null,"and in a new terminal do:"),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-bash"}),"cd example\nyarn; yarn start\n")),Object(r.b)("h2",{id:"usage"},"Usage"),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-jsx"}),"import { MML } from 'mml-react';\n\n// use the react component\n<MML source={mml} />;\n")),Object(r.b)("h2",{id:"overwriting-components"},"Overwriting Components"),Object(r.b)("p",null,"Making basic changes to the components is quite easy.\nHere's an example of how to overwrite the button tag's React component:"),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-js"}),"import { converters } from 'mml-react'\nconst config = {...converters}\nconfig['button'] = (tag, children) => {\n  return <MyCustomButton text={tag.getText()} {...tag.node.attributes} key={tag.key} />\n}\n<MML converters={config} source={source} />\n")),Object(r.b)("p",null,"This approach is generally only recommended for small changes.\nIn most cases where you need more features than MML offers we recommend writing a custom attachment type."),Object(r.b)("h2",{id:"development--contributions"},"Development & Contributions"),Object(r.b)("p",null,"We are intentionally keeping the scope of MML limited.\nIt should solve 80% of your needs for interactive messages.\nWe can't support every scenario though, if you need something more complex you can always implement your own attachment type."),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"yarn lint")," to run linting"),Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"yarn prettier")," to prettify things"),Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"yarn test")," to run tests")),Object(r.b)("p",null,Object(r.b)("a",Object(n.a)({parentName:"p"},{href:"https://getstream.github.io/mml-react/"}),"StyleGuidist docs")," are available"),Object(r.b)("h2",{id:"understanding-the-parser"},"Understanding the Parser"),Object(r.b)("ol",null,Object(r.b)("li",{parentName:"ol"},"SourceToXML turns an MML string into a XML node structure"),Object(r.b)("li",{parentName:"ol"},"XMLtoMMLTree converts the XML nodes to a tree of MML nodes (MMLTree)"),Object(r.b)("li",{parentName:"ol"},"MML nodes can be converted to React nodes using their ToReact method"),Object(r.b)("li",{parentName:"ol"},"The MML react component handles these steps automatically")),Object(r.b)("h2",{id:"tree"},"Tree"),Object(r.b)("p",null,"The tree knows:"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"The name of the MML tag (needed for form logic)"),Object(r.b)("li",{parentName:"ul"},"If there are data tags"),Object(r.b)("li",{parentName:"ul"},"The initial state for the data tags")),Object(r.b)("h2",{id:"naming"},"Naming"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"Tree: The tree of MML tags"),Object(r.b)("li",{parentName:"ul"},"Tag: Intermediate class used for validating MML tags"),Object(r.b)("li",{parentName:"ul"},"Converters: Mapping from MML tag to React Component (React Native coming later)")),Object(r.b)("h2",{id:"how-to-create-a-new-tag"},"How to create a new tag"),Object(r.b)("p",null,"As an example let's say you want to create a new tag called ",Object(r.b)("inlineCode",{parentName:"p"},"color_picker"),".\nHere's how you would go about implementing it."),Object(r.b)("h3",{id:"step-1---tag"},"Step 1 - Tag"),Object(r.b)("p",null,"Add something like this to src/tags/data.js"),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-jsx"}),"export class ColorPicker extends MMLDataTag {\n  initialState() {\n    const data = {};\n    data[this.node.attributes.name] = this.node.attributes.value;\n    return data;\n  }\n}\n")),Object(r.b)("h3",{id:"step-2---tag-parser"},"Step 2 - Tag parser"),Object(r.b)("p",null,"Open ",Object(r.b)("inlineCode",{parentName:"p"},"src/tags/index.js")," and add this to tags variable:"),Object(r.b)("p",null,"tags = {\n...\ncolor_picker: ColorPicker,\n...\n}"),Object(r.b)("h3",{id:"step-3---react-node"},"Step 3 - React node"),Object(r.b)("p",null,"In ",Object(r.b)("inlineCode",{parentName:"p"},"src/components")," create a file called ColorPicker.js and do something along these lines:"),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-jsx"}),"export function ColorPicker({ name, ...props }) {\n  const mmlContext = useContext(MMLContext);\n\n  const value = mmlContext[name];\n\n  return <input value={value} onChange={(event) => mmlContext.setValue(name, event.target.value)} />;\n}\n")),Object(r.b)("p",null,"Styleguidist is the easiest way to test your react component in isolation.\nThe MMLContainer provides the right context so you can test it like:"),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-jsx"}),"<MMLContainer>\n  <ColorPicker />\n</MMLContainer>\n")),Object(r.b)("h3",{id:"step-4---converter"},"Step 4 - Converter"),Object(r.b)("p",null,"Open ",Object(r.b)("inlineCode",{parentName:"p"},"src/converters.js")," and add something like this:"),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-jsx"}),"color_picker: tag => {\n  return <ColorPicker {...tag.node.attributes} />\n},\n")),Object(r.b)("p",null,"And that's it"),Object(r.b)("h2",{id:"components"},"Components"),Object(r.b)("p",null,"MML React components could be divided in four categories:"),Object(r.b)("h3",{id:"naked-components"},"Naked Components"),Object(r.b)("blockquote",null,Object(r.b)("p",{parentName:"blockquote"},"Very basic pieces of UI typically beyond a matter of styling")),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("a",Object(n.a)({parentName:"li"},{href:"/mml-react/components/row"}),Object(r.b)("inlineCode",{parentName:"a"},"Row"))),Object(r.b)("li",{parentName:"ul"},Object(r.b)("a",Object(n.a)({parentName:"li"},{href:"/mml-react/components/col"}),Object(r.b)("inlineCode",{parentName:"a"},"Col")))),Object(r.b)("h3",{id:"container-components"},"Container Components"),Object(r.b)("blockquote",null,Object(r.b)("p",{parentName:"blockquote"},"Always host other components, can be themable")),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("a",Object(n.a)({parentName:"li"},{href:"/mml-react/components/card"}),Object(r.b)("inlineCode",{parentName:"a"},"Card"))),Object(r.b)("li",{parentName:"ul"},Object(r.b)("a",Object(n.a)({parentName:"li"},{href:"/mml-react/components/card-header"}),Object(r.b)("inlineCode",{parentName:"a"},"CardHeader"))),Object(r.b)("li",{parentName:"ul"},Object(r.b)("a",Object(n.a)({parentName:"li"},{href:"/mml-react/components/card-body"}),Object(r.b)("inlineCode",{parentName:"a"},"CardBody")))),Object(r.b)("h3",{id:"core-components"},"Core Components"),Object(r.b)("blockquote",null,Object(r.b)("p",{parentName:"blockquote"},"Basic components that can be composed and themed")),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("a",Object(n.a)({parentName:"li"},{href:"/mml-react/components/text"}),Object(r.b)("inlineCode",{parentName:"a"},"Text")),": a block of text"),Object(r.b)("li",{parentName:"ul"},Object(r.b)("a",Object(n.a)({parentName:"li"},{href:"/mml-react/components/button"}),Object(r.b)("inlineCode",{parentName:"a"},"Button")),":"),Object(r.b)("li",{parentName:"ul"},Object(r.b)("a",Object(n.a)({parentName:"li"},{href:"/mml-react/components/image"}),Object(r.b)("inlineCode",{parentName:"a"},"Image")),": a simple responsive image"),Object(r.b)("li",{parentName:"ul"},Object(r.b)("a",Object(n.a)({parentName:"li"},{href:"/mml-react/components/input"}),Object(r.b)("inlineCode",{parentName:"a"},"Input")),": an input field"),Object(r.b)("li",{parentName:"ul"},Object(r.b)("a",Object(n.a)({parentName:"li"},{href:"/mml-react/components/md"}),Object(r.b)("inlineCode",{parentName:"a"},"MD")),": renders markdown"),Object(r.b)("li",{parentName:"ul"},Object(r.b)("a",Object(n.a)({parentName:"li"},{href:"/mml-react/components/icon"}),Object(r.b)("inlineCode",{parentName:"a"},"Icon")),": simply displays an ico from material design icons"),Object(r.b)("li",{parentName:"ul"},Object(r.b)("a",Object(n.a)({parentName:"li"},{href:"/mml-react/components/loader"}),"Loader"),": signals a ",Object(r.b)("em",{parentName:"li"},"loading")," temporary state with a circular spinner"),Object(r.b)("li",{parentName:"ul"},Object(r.b)("a",Object(n.a)({parentName:"li"},{href:"/mml-react/components/error"}),Object(r.b)("inlineCode",{parentName:"a"},"Error")),": display an ",Object(r.b)("em",{parentName:"li"},"error")," message"),Object(r.b)("li",{parentName:"ul"},Object(r.b)("a",Object(n.a)({parentName:"li"},{href:"/mml-react/components/success"}),Object(r.b)("inlineCode",{parentName:"a"},"Success")),": display a ",Object(r.b)("em",{parentName:"li"},"success")," message")),Object(r.b)("h3",{id:"structured-components"},"Structured Components"),Object(r.b)("blockquote",null,Object(r.b)("p",{parentName:"blockquote"},"More complex components composed of other components, certainly themable")),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("a",Object(n.a)({parentName:"li"},{href:"/mml-react/components/add-to-calendar"}),Object(r.b)("inlineCode",{parentName:"a"},"AddToCalendar")),": wrapped in a ",Object(r.b)("a",Object(n.a)({parentName:"li"},{href:"/mml-react/components/card"}),Object(r.b)("inlineCode",{parentName:"a"},"Card"))),Object(r.b)("li",{parentName:"ul"},Object(r.b)("a",Object(n.a)({parentName:"li"},{href:"/mml-react/components/scheduler"}),Object(r.b)("inlineCode",{parentName:"a"},"Scheduler")),": wrapped in a ",Object(r.b)("a",Object(n.a)({parentName:"li"},{href:"/mml-react/components/card"}),Object(r.b)("inlineCode",{parentName:"a"},"Card"))),Object(r.b)("li",{parentName:"ul"},Object(r.b)("a",Object(n.a)({parentName:"li"},{href:"/mml-react/components/button-list"}),Object(r.b)("inlineCode",{parentName:"a"},"ButtonList")),": a list of ",Object(r.b)("a",Object(n.a)({parentName:"li"},{href:"/mml-react/components/button"}),Object(r.b)("inlineCode",{parentName:"a"},"Button"))),Object(r.b)("li",{parentName:"ul"},Object(r.b)("a",Object(n.a)({parentName:"li"},{href:"/mml-react/components/carousel"}),Object(r.b)("inlineCode",{parentName:"a"},"Carousel")),": a series of ",Object(r.b)("a",Object(n.a)({parentName:"li"},{href:"/mml-react/components/carousel-item"}),Object(r.b)("inlineCode",{parentName:"a"},"CarouselItem"))," typically containing ",Object(r.b)("a",Object(n.a)({parentName:"li"},{href:"/mml-react/components/image"}),Object(r.b)("inlineCode",{parentName:"a"},"Image")),", ",Object(r.b)("a",Object(n.a)({parentName:"li"},{href:"/mml-react/components/text"}),Object(r.b)("inlineCode",{parentName:"a"},"Text"))," and ",Object(r.b)("a",Object(n.a)({parentName:"li"},{href:"/mml-react/components/button"}),Object(r.b)("inlineCode",{parentName:"a"},"Button"))),Object(r.b)("li",{parentName:"ul"},Object(r.b)("a",Object(n.a)({parentName:"li"},{href:"/mml-react/components/number"}),Object(r.b)("inlineCode",{parentName:"a"},"Number")),": input spinner composed of two ",Object(r.b)("a",Object(n.a)({parentName:"li"},{href:"/mml-react/components/button"}),Object(r.b)("inlineCode",{parentName:"a"},"Button"))," and a counter")),Object(r.b)("h2",{id:"styles-customization"},"Styles customization"),Object(r.b)("p",null,"MML react ships with some good looking default styles but it can be completely customised to suit your visual identity."),Object(r.b)("h3",{id:"themes"},"Themes"),Object(r.b)("p",null,"MML ships with a default theme plus four variations. These differentiate from one another only in terms of colours providing different look and feels that suits common scenarios like Social messaging, Customer support, etc. Each theme is either available in the compiled and autoprefixed ",Object(r.b)("inlineCode",{parentName:"p"},"dist/styles/{name}.css")," file and in the ",Object(r.b)("inlineCode",{parentName:"p"},"src/styles/{name}.scss")," source file. You should always include only one of this files, either ",Object(r.b)("inlineCode",{parentName:"p"},"css")," or ",Object(r.b)("inlineCode",{parentName:"p"},"scss"),", as they all includes the basic styling your MML components need."),Object(r.b)("p",null,"If your projects include a ",Object(r.b)("inlineCode",{parentName:"p"},"sass")," compilation step you might tweak the theme variables and roll out your branded style. A theme is made of the following SCSS map:"),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-scss"}),"$mml-theme: (\n  primary-accent: #006cff,\n  app-canvas: #fff,\n  text-high-emphasis: #0e1621,\n  text-mid-emphasis: #8a898e,\n  text-low-emphasis: #b2b1b5,\n  text-self: #fff,\n  text-pressed: #fff,\n  card-bg: #f2f2f2,\n  card-alt-bg: #fff,\n  card-self-bg: #41affc,\n  stroke: #e5e5e6,\n  stroke-low-emphasis: #f2f2f2,\n  shadow: 0px 2px 5px rgba(0, 0, 0, 0.15),\n);\n")),Object(r.b)("blockquote",null,Object(r.b)("p",{parentName:"blockquote"},"If you are running ",Object(r.b)("inlineCode",{parentName:"p"},"sass")," within your project you might customize most aspects of mml styling other than the them through scss variables. Refer ",Object(r.b)("a",Object(n.a)({parentName:"p"},{href:"src/styles/common/_variables.scss"}),"to the source")," to see what is available.")),Object(r.b)("p",null,"Each of these variables is also avaialable as CSS variable that you can tweak dynamically, prefixed with ",Object(r.b)("inlineCode",{parentName:"p"},"--mml"),":"),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-css"}),":root {\n  --mml-primary-accent: #006cff;\n  --mml-app-canvas: #fff;\n}\n")),Object(r.b)("p",null,"This theme related data is also made avaiable to javascript through ",Object(r.b)("a",Object(n.a)({parentName:"p"},{href:"https://github.com/css-modules/icss#export"}),Object(r.b)("inlineCode",{parentName:"a"},"icss :export"))," so that you can import them and reuse them to coherently style other parts of your chat outside of MML attachments (these are used in the MML docz app for instance)."),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-js"}),"import { locals as mmlTheme } from 'mml-react/dist/styles/index.css';\n// or\nimport { locals as mmlTheme } from 'mml-react/src/styles/index.scss';\n\n// variables for js are transformed into camelCase, e.g.:\nprimaryAccent: '#006cff',\nappCanvas: '#fff',\n// ...etc.\n")),Object(r.b)("h3",{id:"differentiations-between-mine-and-others-messages"},"Differentiations between mine and other's messages"),Object(r.b)("p",null,"Some components need to slightly change according to their position in the chat. To achieve this MML scope its ",Object(r.b)("inlineCode",{parentName:"p"},"CSS")," alterations in a configurable selector through the ",Object(r.b)("inlineCode",{parentName:"p"},"SCSS")," variable ",Object(r.b)("inlineCode",{parentName:"p"},"$mml-selector-wrapper-message-self")," whose default value is ",Object(r.b)("inlineCode",{parentName:"p"},".me")," class selector. This selector needs to be placed on the container element that wraps your MML attachment. MML styling by default aligns ",Object(r.b)("inlineCode",{parentName:"p"},".me")," messages on the right hand side.\nInternally to this library these SCSS tweaks are implemented through the ",Object(r.b)("inlineCode",{parentName:"p"},"SCSS mixin mml-me"),", e.g.:"),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-scss"}),"@include mml-component('btn') {\n  text-align: left;\n\n  @include mml-me() {\n    text-align: right;\n  }\n}\n")))}void 0!==s&&s&&s===Object(s)&&Object.isExtensible(s)&&!s.hasOwnProperty("__filemeta")&&Object.defineProperty(s,"__filemeta",{configurable:!0,value:{name:"MDXContent",filename:"README.md"}}),s.isMDXComponent=!0}}]);
//# sourceMappingURL=component---readme-md-90125e0c1b4fbb7b65c0.js.map